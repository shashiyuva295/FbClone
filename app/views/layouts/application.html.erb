<!DOCTYPE html>
<html>
  <head>
    <title>TestApp</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'https://checkout.stripe.com/checkout.js' %>


  </head>

  <body>

    <div class="bs-example">
        <nav class="navbar navbar-expand-md navbar-dark bg-dark">   
            <a href="#"> <%#= image_tag 'logo.png' %> </a>
            <a href="#" class="navbar-brand">GOJI</a>
            
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCollapse">

                <!-- <div class="nav-search" >
                    <form class="form-inline ml-auto">
                        <input type="text" class="form-control mr-sm-2" placeholder="Search for people, groups or events">
                        <button type="submit" class="btn btn-outline-light">Search</button>
                    </form>
                </div> -->

                <div class="navbar-nav">

                    <a href="/posts" class="nav-item nav-link active"> <i class="fa fa-home" aria-hidden="true"></i> Home</a>

                </div>
                
            </div> 

            </div>
        </nav>
    </div>

    <p class="notice"><%= notice %></p>
    <p class="alert"><%= alert %></p>
    

    <%= yield %>

    <script src="https://www.paypal.com/sdk/js?client-id=EBWKjlELKMYqRNQ6sYvFo64FtaRLRR5BdHEESmha49TM"></script>

    <script>
        paypal.Buttons({
          env: 'sandbox', // Valid values are sandbox and live.
          createOrder: function(data, actions) {
          // This function sets up the details of the transaction, including the amount and line item details.
          return actions.order.create({
            purchase_units: [{
              amount: {
                value: '0.01' // This will be replaced, I promise
              }
            }]
          });
        },
        onApprove: async (data) => {}
      }).render('#paypal-button-container');
      </script> 
    
    <!-- <script>
      paypal.Buttons({
        env: 'sandbox', // Valid values are sandbox and live.
        createOrder: async () => {
            const response = await fetch('/create_order', {method: 'POST'});
            const responseData = await response.json();
            return responseData.token;
        },
        onApprove: async (data) => {
            const response = await fetch('/capture_order', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({order_id: data.orderID})
            });
            const responseData = await response.json();
            if (responseData.status === 'COMPLETED') {
              alert('COMPLETED');
              // REDIRECT TO SUCCESS PAGE
            }
        }
      }).render('#paypal-button-container');


    </script> -->

  </body>
</html>